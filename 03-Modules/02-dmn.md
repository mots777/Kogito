# Decision Model and Notation - DMN

## Overview
- Decision Model and Notation (DMN) is used to model decision service graphically.
- It is a standard established by the **Object Management Group (OMG)** for describing and modeling operational decisions.
- DMN decision model are determined by below
  ![](../01-Images/03-DMNComponents.png)
  - **DRD:** 
    - A decision requirements diagrams trace business decisions from start to finish.
    - Each decision node use logic defined in DMN boxed expressions such as decision tables.
    - A DRD can represent part or all of the DMN model.
    - DRD components and requirement connectors details are available [here](https://docs.jboss.org/kogito/release/latest/html_single/#_using_dmn_models_in_kogito_services)
  - **DRG:**
    - A Decision Requirements Graph models a domain of decision-making, showing the most important elements involved in it and the dependencies between them.
    - The elements modeled are **decisions**, **input data**, and **knowledge sources**. 
    - The visual representation of a DRG is called DRD.
- Kogito provides design and runtime support for **DMN 1.2** models at **conformance level 3**.
- It provides runtime-only support for DMN 1.1 and 1.3 models at conformance level 3. 
- DMN 1.1 and 1.3 models are currently not supported in the Kogito DMN modeler.

## FEEL
- Friendly Enough Expression Language (FEEL) is an expression language defined by the Object Management Group (OMG) DMN specification.
- FEEL is designed to facilitate both decision modeling and execution by assigning semantics to the decision model constructs.
- Data Types
    | Data Type                 	| Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          	|
    |---------------------------	|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------	|
    | Number                    	| Numbers in FEEL are based on the IEEE 754-2008 Decimal 128 format, with 34 digits of precision.<br>Internally, numbers are represented in Java as BigDecimals with MathContext DECIMAL128.<br>It is used to represent both integers and floating-point numbers. FEEL numbers use a dot (.) as a decimal separator.<br><br>FEEL does not support -INF, +INF, or NaN. <br>FEEL uses null to represent invalid numbers.<br><br>Kogito extends DMN specification and supports additional number notations<br>- **Scientific:** Suffix *e<exp> or E<exp>*. For example, 1.2e3 or 1.2E3 = 1.2*10**3<br>- **Hexadecimal:** Prefix *0x*. For example, 0xff or 0XFF = 255 	|
    | String                    	| Any sequence of characters delimited by double quotation marks.<br><br>Example "John Doe"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      	|
    | Boolean                   	| FEEL uses three-valued boolean logic true, false or null.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            	|
    | Date                      	| Date literals are not supported in FEEL, but you can use the built-in date() function to construct date values.<br>The format is "YYYY-MM-DD"<br>Date objects have time equal to "00:00:00" <br><br> Example date( "2017-06-23" )                                                                                                                                                                                                                                                                                                                                                                                                                                                         	|
    | Time                      	| Time literals are not supported in FEEL, but you can use the built-in time() function to construct time values.<br>The format is "hh:mm:ss[.uuu][(+-)hh:mm]"<br>uuu - Its optional. Milliseconds<br>[(+-)hh:mm] - Its optional. Offset from UTC time to define its timezone. <br><br> Example time( "22:35:40.345-05:00" )                                                                                                                                                                                                                                                                                                                                                                       	|
    | Date and time             	| Date and time literals are not supported in FEEL, but you can use the built-in date and time() function to construct date and time values<br>The format is "YYYY-MM-DDThh:mm:ss[.uuu][(+-)hh:mm]"<br><br>Example date and time( "2017-02-05T22:35:40.345-05:00" )                                                                                                                                                                                                                                                                                                                                                                                                                                                  	|
    | Days and time duration    	| Days and time duration literals are not supported in FEEL, but you can use the built-in duration() function to construct days and time duration values.<br>Days, hours, minutes and seconds are only supported. Months and years are not supported.<br><br>Example duration( "P1DT23H12M30S" )                                                                                                                                                                                                                                                                                                                                                       	|
    | Years and months duration 	| Years and months duration literals are not supported in FEEL, but you can use the built-in duration() function to construct days and time duration values.<br>This is restricted to only years and months. Days, hours, minutes, or seconds are not supported.<br><br>Example duration( "P3Y5M" )                                                                                                                                                                                                                                                                                                                                                    	|
- The DMN specification currently does not provide an explicit way of declaring a variable as a **function**, **context**, **range**, or **list**, but Kogito extends the DMN built-in types to support variables of these types. Details of these types are given below:

  | Data Type       	| Description                                                                                                                                                                                                                                                                                                                                                                                                            	|
  |-----------------	|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------	|
  | Functions       	| FEEL has function literals that we can use to create functions.<br>The DMN specification currently does not provide an explicit way of declaring a variable as a function<br><br>Example function (a,b) a+b - This return a+b                                                                                                                                                                                          	|
  | Contexts        	| A context in FEEL is a list of key and value pairs, similar to maps in languages like Java.<br><br>Example { x : 5, y : 3 }                                                                                                                                                                                                                                                                                            	|
  | Ranges/Interval 	| A range/interval in FEEL is a value that defines a lower and an upper bound, where either can be open or closed.<br><br>Syntax<br>range = ..<br>open_inclusive = [<br>open_exclusive = (<br>close_inclusive = ]<br>close_exclusive = )<br><br>Example<br>15 in [15..30]<br>15 not in (15..30]<br>30 in [15..30]<br>30 not in[15..30)                                                                                   	|
  | List            	| A list in FEEL is represented by a comma-separated list of values enclosed in square brackets.<br>All lists in FEEL contain elements of the same type and are immutable.<br>Elements in a list can be accessed by index, where the first element is 1. <br>Negative indexes can access elements starting from the end of the list so that -1 is the last element.<br><br>Example<br>[2,3,4,5]<br><br>x[1]=2<br>x[-2]=4 	|

- Built in functions in FEEL are available [here](https://docs.jboss.org/kogito/release/latest/html_single/#ref-dmn-feel-builtin-functions_dmn-models)

## Appendix
- References
  - [OMG DMN](https://www.omg.org/spec/DMN)